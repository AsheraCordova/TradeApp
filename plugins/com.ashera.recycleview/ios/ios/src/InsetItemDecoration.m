//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: D:\Java\git\core-ios-widgets\IOSRecycleViewPlugin\src\main\java\com\ashera\recycleview\InsetItemDecoration.java
//

#include "GridLayoutManager.h"
#include "IWidget.h"
#include "InsetItemDecoration.h"
#include "J2ObjC_source.h"
#include "Rect.h"
#include "RecyclerView.h"
#include "RecyclerViewImpl.h"
#include "View.h"
#include "ViewGroup.h"
#include "WidgetViewHolder.h"
#include "java/lang/Integer.h"


@interface ASInsetItemDecoration ()

- (id)getMarginWithADView:(ADView *)view
      withADXRecyclerView:(ADXRecyclerView *)parent;

@end

__attribute__((unused)) static id ASInsetItemDecoration_getMarginWithADView_withADXRecyclerView_(ASInsetItemDecoration *self, ADView *view, ADXRecyclerView *parent);

@implementation ASInsetItemDecoration

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ASInsetItemDecoration_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (id)getMarginWithADView:(ADView *)view
      withADXRecyclerView:(ADXRecyclerView *)parent {
  return ASInsetItemDecoration_getMarginWithADView_withADXRecyclerView_(self, view, parent);
}

- (void)getItemOffsetsWithADRect:(ADRect *)outRect
                      withADView:(ADView *)view
             withADXRecyclerView:(ADXRecyclerView *)parent
       withADXRecyclerView_State:(ADXRecyclerView_State *)state {
  id insets = ASInsetItemDecoration_getMarginWithADView_withADXRecyclerView_(self, view, parent);
  if (insets == nil || [(JavaLangInteger *) cast_chk(insets, [JavaLangInteger class]) intValue] == 0) return;
  if ([[((ADXRecyclerView *) nil_chk(parent)) getLayoutManager] isKindOfClass:[ADXGridLayoutManager class]]) {
    jint padding = [(JavaLangInteger *) cast_chk(insets, [JavaLangInteger class]) intValue];
    ADXGridLayoutManager_LayoutParams *layoutParams = (ADXGridLayoutManager_LayoutParams *) cast_chk([((ADView *) nil_chk(view)) getLayoutParams], [ADXGridLayoutManager_LayoutParams class]);
    ADXGridLayoutManager *gridLayoutManager = (ADXGridLayoutManager *) cast_chk([parent getLayoutManager], [ADXGridLayoutManager class]);
    jfloat spanSize = [((ADXGridLayoutManager_LayoutParams *) nil_chk(layoutParams)) getSpanSize];
    jfloat totalSpanSize = [((ADXGridLayoutManager *) nil_chk(gridLayoutManager)) getSpanCount];
    jfloat n = totalSpanSize / spanSize;
    jfloat c = [layoutParams getSpanIndex] / spanSize;
    jfloat leftPadding = padding * ((n - c) / n);
    jfloat rightPadding = padding * ((c + 1) / n);
    ((ADRect *) nil_chk(outRect))->left_ = JreFpToInt(leftPadding);
    outRect->right_ = JreFpToInt(rightPadding);
    outRect->bottom_ = padding;
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSObject;", 0x2, 0, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(getMarginWithADView:withADXRecyclerView:);
  methods[2].selector = @selector(getItemOffsetsWithADRect:withADView:withADXRecyclerView:withADXRecyclerView_State:);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "getMargin", "LADView;LADXRecyclerView;", "getItemOffsets", "LADRect;LADView;LADXRecyclerView;LADXRecyclerView_State;" };
  static const J2ObjcClassInfo _ASInsetItemDecoration = { "InsetItemDecoration", "com.ashera.recycleview", ptrTable, methods, NULL, 7, 0x1, 3, 0, -1, -1, -1, -1, -1 };
  return &_ASInsetItemDecoration;
}

@end

void ASInsetItemDecoration_init(ASInsetItemDecoration *self) {
  ADXRecyclerView_ItemDecoration_init(self);
}

ASInsetItemDecoration *new_ASInsetItemDecoration_init() {
  J2OBJC_NEW_IMPL(ASInsetItemDecoration, init)
}

ASInsetItemDecoration *create_ASInsetItemDecoration_init() {
  J2OBJC_CREATE_IMPL(ASInsetItemDecoration, init)
}

id ASInsetItemDecoration_getMarginWithADView_withADXRecyclerView_(ASInsetItemDecoration *self, ADView *view, ADXRecyclerView *parent) {
  ASRecyclerViewImpl_GroupieViewHolder *viewHolder = (ASRecyclerViewImpl_GroupieViewHolder *) cast_chk([((ADXRecyclerView *) nil_chk(parent)) getChildViewHolderWithADView:view], [ASRecyclerViewImpl_GroupieViewHolder class]);
  if (viewHolder == nil || viewHolder->widgetViewHolder_ == nil) {
    return nil;
  }
  return [((id<ASIWidget>) nil_chk(viewHolder->widgetViewHolder_->widget_)) getFromTempCacheWithNSString:@"insets"];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ASInsetItemDecoration)
